<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Friend Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
</head>

<body>
  <div class="container">
    <h2>Survey Questions</h2>
    <hr>
    <h3><strong>About You</strong></h3>

    <form>
      <div class="form-group">
        <label for="formGroupExampleInput"><strong>Name</strong></label>
        <input type="text" class="form-control" id="formGroupExampleInput" placeholder="Required">
      </div>
      <div class="form-group">
        <label for="formGroupExampleInput2"><strong>Link to Photo Image</strong></label>
        <input type="text" class="form-control" id="formGroupExampleInput2" placeholder="Required">
      </div>
    </form>
    <hr>
    <h4><strong>Question 1</strong></h4>
    <h5><strong>Your mind is always buzzing with unexplored ideas and plans.</strong></h5>
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false">
        Select an option
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
        <a class="dropdown-item" href="#">2</a>
        <a class="dropdown-item" href="#">3</a>
        <a class="dropdown-item" href="#">4</a>
        <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
      </div>
      <hr>
      <h4><strong>Question 2</strong></h4>
      <h5><strong>Generally speaking, you rely more on your experience than your imagination.</strong></h5>
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Select an option
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
          <a class="dropdown-item" href="#">2</a>
          <a class="dropdown-item" href="#">3</a>
          <a class="dropdown-item" href="#">4</a>
          <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
        </div>
      </div>
      <hr>
      <h4><strong>Question 3</strong></h4>

      <h5><strong>You find it easy to stay relaxed and focused even when there is some pressure.</strong></h5>
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton3" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Select an option
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
          <a class="dropdown-item" href="#">2</a>
          <a class="dropdown-item" href="#">3</a>
          <a class="dropdown-item" href="#">4</a>
          <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
        </div>
        <hr>
        <h4><strong>Question 4</strong></h4>
        <h5><strong>You rarely do something just out of sheer curiosity.</strong></h5>
        <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton4"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Select an option
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
            <a class="dropdown-item" href="#">2</a>
            <a class="dropdown-item" href="#">3</a>
            <a class="dropdown-item" href="#">4</a>
            <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
          </div>
          <hr>
        </div>
        <h4><strong>Question 5</strong></h4>
        <h5><strong>People can rarely upset.</strong></h5>
        <div class="dropdown">
          <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton5"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Select an option
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
            <a class="dropdown-item" href="#">2</a>
            <a class="dropdown-item" href="#">3</a>
            <a class="dropdown-item" href="#">4</a>
            <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
          </div>
          <hr>
          <h4><strong>Question 6</strong></h4>
          <h5><strong>It is often difficult for you to relate to other people's feelings.</strong></h5>
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton6"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Select an option
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
              <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
              <a class="dropdown-item" href="#">2</a>
              <a class="dropdown-item" href="#">3</a>
              <a class="dropdown-item" href="#">4</a>
              <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
            </div>
            <hr>
            <h4><strong>Question 7</strong></h4>
            <h5><strong>In a discussion, truth should be more important than people's sensitivities.</strong></h5>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton7"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Select an option
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
                <a class="dropdown-item" href="#">2</a>
                <a class="dropdown-item" href="#">3</a>
                <a class="dropdown-item" href="#">4</a>
                <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
              </div>
              <hr>
              <h4><strong>Question 8</strong></h4>
              <h5><strong>You rarely get carried away by fantasies and ideas.</strong></h5>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton8"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Select an option
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
                  <a class="dropdown-item" href="#">2</a>
                  <a class="dropdown-item" href="#">3</a>
                  <a class="dropdown-item" href="#">4</a>
                  <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
                </div>
                <hr>
                <h4><strong>Question 9</strong></h4>
                <h5><strong>You think that everyone's views should be respected regardless of whether they are supported
                    by facts or not.</strong></h5>
                <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton9"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Select an option
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
                    <a class="dropdown-item" href="#">2</a>
                    <a class="dropdown-item" href="#">3</a>
                    <a class="dropdown-item" href="#">4</a>
                    <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
                  </div>
                  <hr>
                  <h4><strong>Question 10</strong></h4>
                  <h5><strong>You feel more energetic after spending time with a group of people.</strong></h5>
                  <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton10"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Select an option
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" href="#">1 (Strongly Disagree)</a>
                      <a class="dropdown-item" href="#">2</a>
                      <a class="dropdown-item" href="#">3</a>
                      <a class="dropdown-item" href="#">4</a>
                      <a class="dropdown-item" href="#">5 (Stongly Agree)</a>
                    </div>
                    <hr>
                    <button type="button" id="submit" class="btn btn-primary btn-lg btn-block"><i
                        class="far fa-check-circle"></i>
                      Submit</button>
                  </div>
                </div>
                <br>
                <br>
                <footer class="footer">
                  <div class="container">
                    <p>
                      <a href="/api/friendslist">API Friends List</a>
                      |
                      <a href="https://github.com/handomekal/Friend-Finder.git">Github Repo</a>
                    </p>
                  </div>
                </footer>
                <div id="results-modal" class="modal fade" role="dialog">
                  <div class="modal-dialog">


                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h2 class="modal-title"><strong>Best Match</strong></h2>
                      </div>
                      <div class="modal-body">
                        <h2 id="match-name"></h2>
                        <img id="match-img"
                          src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                      </div>
                    </div>

                  </div>
                </div>
                <div>
                  <script type="text/javascript">
                    // Chosen CSS
                    var config = {
                      ".chosen-select": {},
                      ".chosen-select-deselect": {
                        allow_single_deselect: true
                      },
                      ".chosen-select-no-single": {
                        disable_search_threshold: 10
                      },
                      ".chosen-select-no-results": {
                        no_results_text: "Oops, nothing found!"
                      },
                      ".chosen-select-width": {
                        width: "95%"
                      }
                    };

                    for (var selector in config) {
                      $(selector).chosen(config[selector]);
                    }

                    // Capture the form inputs
                    $("#submit").on("click", function (event) {
                      event.preventDefault();

                      // Form validation
                      function validateForm() {
                        var isValid = true;
                        $(".form-control").each(function () {
                          if ($(this).val() === "") {
                            isValid = false;
                          }
                        });

                        $(".chosen-select").each(function () {

                          if ($(this).val() === "") {
                            isValid = false;
                          }
                        });
                        return isValid;
                      }

                      // If all required fields are filled
                      if (validateForm()) {
                        // Create an object for the user"s data
                        var userData = {
                          name: $("#name").val(),
                          photo: $("#photo").val(),
                          scores: [
                            $("#q1").val(),
                            $("#q2").val(),
                            $("#q3").val(),
                            $("#q4").val(),
                            $("#q5").val(),
                            $("#q6").val(),
                            $("#q7").val(),
                            $("#q8").val(),
                            $("#q9").val(),
                            $("#q10").val()
                          ]
                        };

                        // AJAX post the data to the friends API.
                        $.post("/api/friends", userData, function (data) {

                          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                          $("#match-name").text(data.name);
                          $("#match-img").attr("src", data.photo);

                          // Show the modal with the best match
                          $("#results-modal").modal("toggle");

                        });
                      } else {
                        alert("Please fill out all fields before submitting!");
                      }
                    });
                  </script>

</body>

</html>